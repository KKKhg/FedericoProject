<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapperInterface.ClientMapper">

	<select id="selectOne" resultType="vo.ClientVO">
		SELECT * FROM client where clientId = #{clientId}
	</select>
	
	
	
<!-- ======================= 카트 관련 ====================== -->
	
	<resultMap type="vo.CartVO" id="CartVO">
		<result property="cartSeq" column="cartSeq"/>
		<result property="clientId" column="clientId"/>
		<result property="menuQty" column="menuQty"/>
		<collection property="menuVo" resultMap="MenuVO"></collection>
	</resultMap>
	
	<resultMap type="vo.MenuVO" id="MenuVO">
		<result property="menuIndex" column="menuIndex"/>
		<result property="menuName" column="menuName"/>
		<result property="menuFlag" column="menuFlag"/>
		<result property="menuPrice" column="menuPrice"/>
		<result property="menuImage" column="menuImage"/>
	</resultMap>
	
	
	
	<!-- 회원장바구니에 항목 추가 -->
	<insert id="insertCart">
		INSERT INTO cart(cartseq, clientid, menuindex, menuqty)
		VALUES ((SELECT nvl(max(cartseq),0)+1 FROM cart), #{clientId}, #{menuVo.menuIndex}, #{menuQty})
	</insert>
	
	
	<!-- 회원장바구니 조회 by 고객 -->
	<select id="selectCartbyClient" resultMap="CartVO">
		SELECT c.*, m.* FROM cart c, menuinfo m WHERE clientid = #{clientId} AND c.menuindex = m.menuindex
	</select>
	
	<!-- 회원장바구니 메뉴 수량변경  -->
	<update id="updateCart">
		UPDATE cart SET menuqty = #{menuQty} WHERE cartseq = #{cartSeq}
	</update>
	
	<!-- 회원장바구니 삭제 -->
	<delete id="deleteCart">
		DELETE FROM cart WHERE cartseq = #{cartSeq}
	</delete>
	
	
	
	
</mapper>

<!-- ======================= 카트 관련 ====================== -->














